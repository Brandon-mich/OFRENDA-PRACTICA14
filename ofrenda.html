<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ofrenda interactiva - Día de Muertos</title>
  <style>
    :root{
      --bg:#1b1b2f;
      --altar:#2b2b42;
      --marigold:#f39c12;
      --paper:#ffd3a5;
      --text:#fffdf6;
      --accent:#ff6b6b;
      --candle:#ffeaa7;
      --glass: rgba(255,255,255,0.06);
      --card-bg: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    }
    *{box-sizing:border-box}
    body{
      margin:0;min-height:100vh;font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: radial-gradient(circle at 10% 10%, #2b2b42 0%, var(--bg) 40%), linear-gradient(180deg, rgba(0,0,0,0.2), rgba(0,0,0,0.6));
      color:var(--text);display:flex;align-items:center;justify-content:center;padding:2rem;
    }

    .stage{
      width:1100px;max-width:95%;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.18));border-radius:18px;padding:28px;box-shadow:0 10px 40px rgba(0,0,0,0.6);
      border:1px solid rgba(255,255,255,0.03);
      display: flex;
      flex-direction: column;
    }

    header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
    header h1{font-size:1.6rem;margin:0}
    header p{margin:0;opacity:0.9}

    /* papel picado */
    .papel-picado{display:flex;gap:6px;align-items:center;justify-content:center;margin-bottom:14px}
    .banderilla{width:calc(100% / 12);height:40px;background:var(--paper);clip-path:polygon(50% 100%, 100% 0, 0 0);opacity:0.95;transform-origin:center;}
    .banderilla:nth-child(odd){background:#ffd1c1}
    .banderilla:nth-child(3n){background:#ffd3a5}

    .altar{
      background:linear-gradient(180deg,#27273a 0%, #1e1e2e 100%);
      border-radius:12px;padding:24px;display:grid;grid-template-columns:1fr 360px;gap:20px;align-items:start;min-height:420px;border:1px solid rgba(255,255,255,0.03);
      flex-grow: 1;
    }

    /* zona principal */
    .principal{padding:8px}
    .ofrenda-top{display:flex;gap:12px;align-items:center}
    .photos{display:flex;gap:12px}
    .photo{
      width:120px;height:120px;border-radius:8px;background:linear-gradient(135deg,#fff3cd,#ffd7a6);display:flex;align-items:center;justify-content:center;font-weight:700;color:#2b2b42;box-shadow:0 6px 18px rgba(0,0,0,0.5);cursor:pointer;overflow:hidden;position:relative;user-select:none;
      transition: transform 0.2s ease;
    }
    .photo:hover{transform:translateY(-4px);}
    .photo input{display:none}
    .photo img{width:100%;height:100%;object-fit:cover;display:block;border-radius:8px}

    .title{font-size:1.1rem;margin-bottom:8px}

    /* velas y flores */
    .altar-center{display:flex;gap:14px;align-items:flex-end;margin-top:14px}
    .velas{display:flex;gap:8px;align-items:end}
    .vela{
      width:28px;height:80px;background:var(--candle);border-radius:8px 8px 4px 4px;position:relative;box-shadow:inset 0 -6px 12px rgba(0,0,0,0.08);
      cursor:pointer;
      transition: box-shadow 0.3s ease;
      user-select:none;
    }
    .vela:hover{
      box-shadow: 0 0 8px 2px #ffde59 inset, inset 0 -6px 12px rgba(0,0,0,0.15);
    }
    .llama{
      position:absolute;left:50%;transform:translateX(-50%);top:-18px;width:18px;height:30px;border-radius:50% 50% 40% 40%/60% 60% 40% 40%;background:linear-gradient(180deg,#ffdd7a,#ff7b7b);
      filter:blur(1.3px);
      opacity:0.95;
      pointer-events:none;
      visibility: hidden;
    }
    .vela.lit .llama{
      visibility: visible;
      animation:flicker 1s infinite;
    }
    @keyframes flicker{
      0%{transform:translate(-50%,-18px) scale(1)}
      50%{transform:translate(-50%,-20px) scale(0.95)}
      100%{transform:translate(-50%,-18px) scale(1)}
    }

    .flor{
      width:80px;height:80px;border-radius:50%;background:conic-gradient(from 120deg, #ffb03b 0 20%, #ff8a00 20% 40%, #ffd27a 40% 60%);
      box-shadow:0 6px 20px rgba(255,140,0,0.12);
      display:flex;align-items:center;justify-content:center;
      font-size:2.4rem;
      user-select:none;
    }

    /* barra lateral */
    aside{
      background:var(--card-bg);
      padding:16px;
      border-radius:10px;
      height:100%;
      align-self:stretch;
      display:flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .detalle{display:flex;flex-direction:column;gap:12px}

    .item{
      background:var(--glass);
      padding:10px;
      border-radius:8px;
      user-select:none;
    }

    .ofrenda-items{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:10px;
    }

    /* botones */
    .controls{
      display:flex;
      gap:8px;
      margin-top:12px;
    }
    button{
      background:transparent;
      border:1px solid rgba(255,255,255,0.08);
      padding:8px 12px;
      border-radius:8px;
      color:var(--text);
      cursor:pointer;
      transition: background 0.3s ease, color 0.3s ease;
      user-select:none;
    }
    button.primary{
      background:linear-gradient(90deg,#ff9a9e,#fecf8a);
      color:#1b1b2f;
      border:0;
    }
    button:hover{
      background:rgba(255,255,255,0.1);
    }

    footer{
      margin-top:12px;
      font-size:0.85rem;
      opacity:0.9;
      text-align:center;
      user-select:none;
    }

    /* pequeño responsive */
    @media (max-width:900px){
      .altar{grid-template-columns:1fr;}
      .photos{flex-wrap:wrap}
      .photo{width:90px;height:90px}
      .flor{width:64px;height:64px;font-size:1.8rem}
      aside{
        margin-top: 20px;
        height: auto;
      }
    }

    /* área editable dedicatoria */
    #dedicatoria{
      width: 100%;
      min-height: 100px;
      resize: vertical;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.1);
      padding: 10px;
      background: rgba(255,255,255,0.05);
      color: var(--text);
      font-family: inherit;
      font-size: 1rem;
      outline: none;
      transition: border-color 0.3s ease;
    }
    #dedicatoria:focus{
      border-color: var(--marigold);
      background: rgba(255,255,255,0.1);
    }
  </style>
</head>
<body>
  <div class="stage" role="main" aria-label="Ofrenda interactiva de Día de Muertos">
    <header>
      <div style="width:52px;height:52px;border-radius:10px;background:linear-gradient(135deg,#ffb27a,#ff6b6b);display:flex;align-items:center;justify-content:center;font-weight:700" aria-hidden="true">🪦</div>
      <div>
        <h1>Ofrenda interactiva</h1>
        <p>Ofrenda de Día de Muertos — haz clic en las fotos para reemplazarlas y en las velas para encenderlas.</p>
      </div>
    </header>

    <div class="papel-picado" aria-hidden="true">
      <div class="banderilla"></div><div class="banderilla"></div><div class="banderilla"></div><div class="banderilla"></div><div class="banderilla"></div><div class="banderilla"></div>
      <div class="banderilla"></div><div class="banderilla"></div><div class="banderilla"></div><div class="banderilla"></div>
    </div>

    <main class="altar" role="application" aria-label="Ofrenda principal">
      <section class="principal">
        <div class="ofrenda-top">
          <div>
            <div class="title">Fotos de los recordados</div>
            <div class="photos">
              <label class="photo" title="Haz clic para subir una foto" tabindex="0" role="button" aria-label="Subir foto 1">
                <input type="file" accept="image/*" class="img-input" aria-hidden="true" tabindex="-1">
                <span>Subir foto</span>
              </label>
              <label class="photo" title="Haz clic para subir una foto" tabindex="0" role="button" aria-label="Subir foto 2">
                <input type="file" accept="image/*" class="img-input" aria-hidden="true" tabindex="-1">
                <span>Subir foto</span>
              </label>
              <label class="photo" title="Haz clic para subir una foto" tabindex="0" role="button" aria-label="Subir foto 3">
                <input type="file" accept="image/*" class="img-input" aria-hidden="true" tabindex="-1">
                <span>Subir foto</span>
              </label>
            </div>
          </div>
        </div>

        <div class="altar-center">
          <div class="velas" aria-label="Velas de la ofrenda" role="list">
            <div class="vela" data-vela="1" role="listitem" tabindex="0" aria-pressed="false" aria-label="Vela 1, apagada"><div class="llama"></div></div>
            <div class="vela" data-vela="2" role="listitem" tabindex="0" aria-pressed="false" aria-label="Vela 2, apagada"><div class="llama"></div></div>
            <div class="vela" data-vela="3" role="listitem" tabindex="0" aria-pressed="false" aria-label="Vela 3, apagada"><div class="llama"></div></div>
          </div>

          <div style="flex:1;display:flex;flex-direction:column;gap:12px">
            <div style="display:flex;align-items:center;gap:14px">
              <div class="flor" aria-hidden="true">🌼</div>
              <div>
                <div class="title">Nombre o dedicatoria</div>
                <textarea id="dedicatoria" placeholder="Escribe aquí la dedicatoria que quieras mostrar en la ofrenda." aria-label="Área para escribir dedicatoria"></textarea>
              </div>
            </div>
            <div class="item" style="background:transparent;border-radius:8px;padding:14px;border:1px dashed rgba(255,255,255,0.04); user-select:none;">
              <p style="margin:0">En la mesa puedes colocar: pan de muerto, calaveritas de azúcar, copal, fotografías, objetos personales, comida favorita y una vela por cada memoria.</p>
            </div>
          </div>

          <div style="width:120px;display:flex;flex-direction:column;align-items:center;gap:10px">
            <div style="width:100%;text-align:center;font-weight:700">Velas</div>
            <div style="width:100%;height:80px;display:flex;align-items:center;justify-content:center;gap:8px">
              <!-- réplica decorativa de velas -->
            </div>
          </div>
        </div>
      </section>

      <aside>
        <div class="detalle">
          <div class="item">
            <strong>Instrucciones</strong>
            <ul style="margin:8px 0 0 18px;padding:0">
              <li>Haz clic en una foto para subir la imagen de la persona recordada.</li>
              <li>Haz clic en una vela para encenderla o apagarla.</li>
              <li>Usa el botón para encender o apagar todas las velas.</li>
            </ul>
          </div>

          <div class="item">
            <strong>Elementos sugeridos</strong>
            <div class="ofrenda-items" style="margin-top:8px">
              <div>Pan de muerto</div>
              <div>Copal</div>
              <div>Calaveritas</div>
              <div>Fotografías</div>
            </div>
          </div>

          <div class="item">
            <strong>Opciones</strong>
            <div class="controls">
              <button id="toggleAll" class="primary" aria-pressed="false">Encender/apagar velas</button>
            </div>
          </div>
        </div>
      </aside>
    </main>

    <footer>Brandon.</footer>
  </div>

  <script>
    // cargar imagen seleccionada en la miniatura
    document.querySelectorAll('.img-input').forEach(input =>{
      input.addEventListener('change', e =>{
        const file = e.target.files[0];
        if(!file) return;
        const url = URL.createObjectURL(file);
        const label = e.target.closest('.photo');
        label.innerHTML = '';
        const img = document.createElement('img');
        img.src = url; 
        img.alt = 'Foto de recuerdo';
        label.appendChild(img);
      });
    });

    // encender/apagar velas con click y teclado (Enter, Space)
    const velas = Array.from(document.querySelectorAll('.vela'));
    velas.forEach(v => {
      function toggleVela() {
        v.classList.toggle('lit');
        const lit = v.classList.contains('lit');
        v.setAttribute('aria-pressed', lit);
        v.setAttribute('aria-label', `Vela ${v.dataset.vela}, ${lit ? 'encendida' : 'apagada'}`);
      }
      v.addEventListener('click', toggleVela);
      v.addEventListener('keydown', e => {
        if(e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          toggleVela();
        }
      });
    });

    // botón alternar todas las velas
    const btnToggleAll = document.getElementById('toggleAll');
    btnToggleAll.addEventListener('click', ()=>{
      const algunaApagada = velas.some(v => !v.classList.contains('lit'));
      velas.forEach(v => {
        v.classList.toggle('lit', algunaApagada);
        v.setAttribute('aria-pressed', algunaApagada);
        v.setAttribute('aria-label', `Vela ${v.dataset.vela}, ${algunaApagada ? 'encendida' : 'apagada'}`);
      });
      btnToggleAll.setAttribute('aria-pressed', algunaApagada);
    });
  </script>

</body>
</html>
